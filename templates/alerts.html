<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <!--<meta name=description content="This site was generated with Anima. www.animaapp.com"/>-->
    <!-- <link rel="shortcut icon" type=image/png href="https://animaproject.s3.amazonaws.com/home/favicon.png" /> -->
    <meta name="viewport" content="width=1440, maximum-scale=1.0" />
    <link rel="shortcut icon" type="image/png" href="https://animaproject.s3.amazonaws.com/home/favicon.png" />
    <meta name="og:type" content="website" />
    <meta name="twitter:card" content="photo" />
    <link rel="stylesheet" type="text/css" href="css/frame-39881.css" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />

    <link rel="stylesheet" type="text/css" href="css/desktop-1.css" />
    <link rel="stylesheet" type="text/css" href="css/styleguide.css" />
    <link rel="stylesheet" type="text/css" href="css/globals.css" />
  </head>
  <body>
    <input type="hidden" id="anPageName" name="page" value="desktop-4" />
    <div class="container-center-horizontal">
      <div class="desktop-4 screen">
        <div class="overlap-group2">
          <div class="main desktop-1">
            <h1 class="text-1 valign-text-middle inter-semi-bold-mirage-24px">My Alerts</h1>
            <p class="the-latest-updates-o inter-normal-fiord-14px">
              The latest updates on regulatory changes that may impact your products and manufacturing processes.
            </p>
            <div class="container" style="width:100%;">
              <div class="actions">
                <div class="button">
                  <img class="filter-lines" src="img/filter-lines.svg" alt="filter-lines">
                  <div class="text text-smsemibold">Filters</div>
                </div>
                <div class="button-group button-4">

                </div>
                <!-- <div class="button">
                  <img class="filter-lines" src="img/filter-lines.svg" alt="filter-lines">
                  <div class="text text-smsemibold">Filters</div>
                </div> -->
              </div>

              <div class="table">
                <div class="content-1 content-3">
                    <div class="column" id="date-column">
                        <div class="table-header-cell">
                            <div class="table-header table-1">
                                <div class="text-1 text-smmedium">Date</div>
                            </div>
                        </div>
                    </div>
                    <div class="column-1 column-4 inter-normal-mirage-16px" id="alert-column">
                        <div class="table-header-cell">
                            <div class="table-header table-1">
                                <div class="text-1 text-smmedium">Alert</div>
                            </div>
                        </div>
                    </div>
                    <div class="column-2 column-4" id="stage-column">
                        <div class="table-header-cell">
                            <div class="table-header table-1">
                                <div class="text-1 text-smmedium">Stage</div>
                            </div>
                        </div>
                    </div>
                    <div class="column-3 column-4" id="source-column">
                        <div class="table-header-cell">
                            <div class="table-header table-1">
                                <div class="text-1 text-smmedium">Source</div>
                            </div>
                        </div>
                    </div>
                </div>
              </div>
              
            </div>

          </div>
          <div class="sidebar-navigation">
            <div class="content-1">
              <div class="nav">
                <div class="navigation">
                  <div class="dropdown">
                    <div class="button-1 button-3">
                      <div class="group-39831">
                        <div class="image-65"><img src="img/rina.png" width="20"></div>
                        <div class="text-4 inter-semi-bold-oxford-blue-15px">RINA</div>
                      </div>
                      <img class="chevron-down" src="img/chevron-down.svg" alt="chevron-down" />
                    </div>
                  </div>
                  <div class="group-39832">
                    <div class="flex-col-1 flex-col-3">
                      <div class="frame-39896">
                        <a href="index.html">
                          <div class="nav-item-base-5">
                            <div class="content">
                              <img
                                class="bar-chart-square-02"
                                src="img/bar-chart-square-02.svg"
                                alt="bar-chart-square-02"
                              />
                              <div class="text text-mdsemibold">Home</div>
                            </div>
                          </div>
                        </a>

                        <a href="alerts.html">
                          <div class="nav-item-base-2 nav-item-base-5">
                            <div class="content">
                              <img class="bell-02" src="img/bell-02-3.svg" alt="bell-02" />
                              <div class="text text-mdsemibold">My Alerts</div>
                            </div>
                          </div>
                        </a>
                        <div class="nav-item-base-4 nav-item-base-5">
                          <div class="content">
                            <img class="bookmark-check" src="img/bookmark-check.svg" alt="bookmark-check" />
                            <div class="text text-mdsemibold">Subscriptions</div>
                          </div>
                        </div>
                      </div>
                      <div class="nav-item-base"><div class="text-5 inter-normal-mirage-14px">MONITORING</div></div>
                      <div class="nav-item-base-1 nav-item-base-5">
                        <div class="content">
                          <img class="scales-02" src="img/scales-02-5.svg" alt="scales-02" />
                          <div class="text text-mdsemibold">Legislation</div>
                        </div>
                      </div>
                      <div class="nav-item-base-1 nav-item-base-5">
                        <div class="content">
                          <img class="cube-01" src="img/cube-01.svg" alt="cube-01" />
                          <div class="text text-mdsemibold">Products</div>
                        </div>
                      </div>
                      <div class="nav-item-base-1 nav-item-base-5">
                        <div class="content">
                          <img class="beaker-01" src="img/beaker-01.svg" alt="beaker-01" />
                          <div class="text text-mdsemibold">Substances</div>
                        </div>
                      </div>
                      <div class="group-39833">
                        <div class="nav-item-base"><div class="text-6 inter-normal-mirage-14px">MANAGE</div></div>
                        <div class="nav-item-base-1 nav-item-base-5">
                          <div class="content">
                            <img class="folder" src="img/folder.svg" alt="folder" />
                            <div class="text text-mdsemibold">Documents</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <footer class="footer">
                <div class="account">
                  <div class="avatar-label-group">
                    <div class="group-39807">
                      <div class="overlap-group-1"><div class="text-7 valign-text-middle text-smmedium">AL</div></div>
                    </div>
                    <div class="text-and-supporting-text"><div class="text-8 text-smsemibold">Anthony Lord</div></div>
                  </div>
                  <div class="button-2 button-3">
                    <img class="log-out-01" src="img/log-out-01.svg" alt="log-out-01" />
                  </div>
                </div>
              </footer>
            </div>
          </div>
          <div class="group-39826">
            <div class="group-39805">
              <div class="group-21">
                <div class="flex-col-2 flex-col-3">
                  <div class="rectangle-1 rectangle-3"></div>
                  <div class="flex-row flex">
                    <div class="rectangle-2 rectangle-3"></div>
                    <div class="rectangle-6 rectangle-3"></div>
                  </div>
                </div>
                <div class="flex-row flex">
                  <div class="rectangle"></div>
                  <div class="rectangle"></div>
                  <div class="rectangle"></div>
                </div>
              </div>
              <img class="foresight" src="img/foresight-3.svg" alt="foresight" />
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="overlay-frame-39881" class="overlay-base">
      <div class="frame-39881 screen">
        <div class="frame-39881-1">
          <a href="javascript:HideOverlay('frame-39881', 'animate-disappear');" class="align-self-flex-end"
            ><img class="x-close" src="img/x-close.svg" alt="x-close" />
          </a>
          <h1 class="text inter-normal-mirage-36px">Letâ€™s add your product data</h1>
          <p class="add-your-product-dat inter-normal-fiord-16px-2">
            Add your product data to get the latest alerts on regulatory changes that may impact your products and
            manufacturing processes.
          </p>
          <a href="frame-39882.html">
            <div class="group-39860">
              <div class="button">
                <div class="text-1 text-mdsemibold">Add product data</div>
                <img class="arrow-narrow-right" src="img/arrow-narrow-right.svg" alt="arrow-narrow-right" />
              </div></div
          ></a>
        </div>
      </div>
    </div>


    <script>
      const sheetId = '1amPQjJZdYZmeGOwm8eih0crWT0hflLr4lI1woofwRJM'; // Google Sheets ID
      const apiKey = 'AIzaSyDkPYfWXv71q1eWnNMWPahaT4e7Fcx5nTc'; // Your API key
      const range = 'List!A2:E'; // Adjust the range according to your sheet structure
  
      // Define the mapping between sources and their corresponding image paths
      const sourceImageMapping = {
          'European Commission': 'img/frame-39904.svg',
          'ECHA': 'img/favicon-2.svg',
          'EUR-Lex': 'img/eurlex.svg',
          'HSE': 'img/favicon--1--1.png'
          // Add more mappings as necessary
      };
  
      const url = `https://sheets.googleapis.com/v4/spreadsheets/${sheetId}/values/${range}?key=${apiKey}`;
      console.log('Fetching data from URL:', url);
  
      fetch(url)
          .then(response => {
              console.log('Response status:', response.status);
              if (!response.ok) {
                  throw new Error(`HTTP error! status: ${response.status}`);
              }
              return response.json();
          })
          .then(data => {
              console.log('Data received:', data);
              if (!data.values) {
                  throw new Error("No data found in the response");
              }
              const rows = data.values;
              console.log('Rows:', rows);
  
              const dateColumn = document.getElementById('date-column');
              const alertColumn = document.getElementById('alert-column');
              const stageColumn = document.getElementById('stage-column');
              const sourceColumn = document.getElementById('source-column');
  
              rows.forEach((row, index) => {
                  console.log(`Processing row ${index + 1}:`, row);
  
                  // Date Column
                  const dateCell = document.createElement('div');
                  dateCell.classList.add('table-cell', 'table-1');
                  dateCell.innerHTML = `<div class="text-2 inter-normal-fiord-16px">${row[0]}</div>`;
                  dateColumn.appendChild(dateCell);
  
                  // Alert Column with Link
                  const alertCell = document.createElement('div');
                  alertCell.classList.add('table-cell-3');
                  
                  const link = document.createElement('a');
                  link.href = row[4]; // Assuming the URL is in column E
                  link.innerHTML = `
                      <div class="table-cell-2 table-cell-3">
                          <div class="text-and-supporting-text">
                              <p class="text-3">${row[1]}</p> <!-- Assuming the title is in column B -->
                          </div>
                      </div>`;
                  
                  alertCell.appendChild(link);
                  alertColumn.appendChild(alertCell);
  
                  // Stage Column
                  const stageCell = document.createElement('div');
                  stageCell.classList.add('table-cell', 'table-1');
                  stageCell.innerHTML = `<div class="badge">
                                            <div class="text-4 text-smmedium">${row[2]}</div>`; // Assuming the stage is in column C
                  stageColumn.appendChild(stageCell);
  
                  // Source Column with Image
                  const sourceCell = document.createElement('div');
                  sourceCell.classList.add('table-cell', 'table-1');
  
                  const frameDiv = document.createElement('div');
                  frameDiv.classList.add('frame-39876');
  
                  const sourceName = row[3]; // Assuming the source name is in the 4th column
                  const imgSrc = sourceImageMapping[sourceName] || 'img/default-image.svg'; // Default image if not found
                  const imgElement = document.createElement('img');
                  imgElement.src = imgSrc;
                  imgElement.alt = sourceName;
  
                  const textDiv = document.createElement('div');
                  textDiv.classList.add('text-3', 'inter-normal-fiord-14px');
                  textDiv.textContent = sourceName;
  
                  frameDiv.appendChild(imgElement);
                  frameDiv.appendChild(textDiv);
                  sourceCell.appendChild(frameDiv);
  
                  sourceColumn.appendChild(sourceCell);
              });
          })
          .catch(error => {
              console.error('Error fetching data:', error);
          });
  </script> 
  

  </body>
</html>
